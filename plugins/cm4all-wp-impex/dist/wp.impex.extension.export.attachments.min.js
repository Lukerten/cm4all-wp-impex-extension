var wp=wp||{};wp.impex=wp.impex||{};wp.impex.extension=wp.impex.extension||{};wp.impex.extension.export=wp.impex.extension.export||{};wp.impex.extension.export.attachments=(()=>{var a=window.wp.hooks,{actions:h,addAction:u,addFilter:A,applyFilters:F,createHooks:x,currentAction:g,currentFilter:k,defaultHooks:b,didAction:y,didFilter:H,doAction:S,doingAction:_,doingFilter:v,filters:E,hasAction:C,hasFilter:I,removeAction:L,removeAllActions:M,removeAllFilters:N,removeFilter:R}=window.wp.hooks;var r=window.wp.impex.debug;var e=window.wp.impex.filters;var f=r.default("wp.impex.attachments");f("huhu!");a.addFilter(e.SLICE_REST_UNMARSHAL,e.NAMESPACE,async function(w,t,n,l){if(t.tag==="attachment"&&t.meta.entity==="attachment"&&t.type==="resource"){let o=t._links?.self;if(o)for(let d of o){let i=d.href,s=i.split(/[\\/]/),c=`slice-${n.toString().padStart(4,"0")}-`+s.pop();await fetch(i).then(async p=>{attachmentFileHandle=await l.getFileHandle(c,{create:!0});let m=await attachmentFileHandle.createWritable();await p.body.pipeTo(m)})}delete t._links}return t});})();
